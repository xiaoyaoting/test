const axios = require('./axios');

// Whether we are running in an pre-baked image
// refer: https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/identify_ec2_instances.html
async function isEC2() {
  try {
    const url = 'http://169.254.169.254/latest/dynamic/instance-identity/document';
    const { status } = await axios.get(url, { timeout: 1000 });
    return status === 200;
  } catch {
    return false;
  }
}

module.exports = isEC2;
