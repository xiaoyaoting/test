"use strict";
const mcrypto_1 = require("@ocap/mcrypto");
const util_1 = require("@ocap/util");
const did_1 = require("@arcblock/did");
const toBlockletDid = (name) => {
    const pk = (0, util_1.toHex)(Buffer.from(typeof name === 'string' ? name.trim() : name));
    return (0, did_1.fromPublicKey)(pk, { role: mcrypto_1.types.RoleType.ROLE_ANY });
};
toBlockletDid.toExternalBlocklet = (name, userDid, { didOnly, nameOnly } = {}) => {
    const blockletName = `${name}-${userDid.toLowerCase().substring(userDid.length - 6)}`;
    if (nameOnly) {
        return blockletName;
    }
    const blockletDid = toBlockletDid(blockletName);
    if (didOnly) {
        return blockletDid;
    }
    return {
        name: blockletName,
        did: blockletDid,
    };
};
module.exports = toBlockletDid;
