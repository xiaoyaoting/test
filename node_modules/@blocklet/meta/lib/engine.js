"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
const os_1 = __importDefault(require("os"));
/**
 * get blocklet engine info by platform
 * @param {object} meta blocklet meta
 */
const getEngineByPlatform = (meta) => {
    if (meta === undefined) {
        throw new Error('blocklet meta param is required');
    }
    const { engine } = meta;
    if (!engine) {
        return { interpreter: 'node', script: '' };
    }
    if (!Array.isArray(engine)) {
        return engine;
    }
    const platform = os_1.default.platform();
    const tmpRuntime = engine.find((r) => r.platform === platform);
    if (!tmpRuntime) {
        throw new Error(`can not find a proper engine interpreter on ${platform}`);
    }
    return tmpRuntime;
};
module.exports = getEngineByPlatform;
